<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>canvas圆弧</title>
    <style>
        body {
            background-color: #000;
            text-align: center;
        }
    
        #c1 {
            background-color: #fff;
        }
    </style>
    <script>

        // 非0环绕
        
        window.onload = function() {
            let oC = document.getElementById('c1');
            let gd = oC.getContext('2d');
            let rate = 50; du = read(rate), num = 150;
            function hua() {
                gd.beginPath();
                // 外层圆环（灰色）
                // 开始坐标x，y，半径，开始角度，结束角度，默认顺时针（false）
                gd.arc(100, 100, 80, Math.PI/6, Math.PI*15/18, true);
                gd.strokeStyle = '#ebebeb';
                gd.lineWidth = 10;
                gd.lineCap = 'round';
                gd.stroke();
            };
            
            


            

            hua();
            

            

            // 计算角度
            function read(x) {
                let d = 0;
                d = (x/100*240 + 150);
                return d;
            }// 比例圆环
            
            function wai(dushu) {
                gd.beginPath();
                
                gd.arc(100, 100, 80, Math.PI/180*(dushu%360), (5*Math.PI/6), true);
                let gradient = gd.createLinearGradient(0, 0, 200, 0);
                gradient.addColorStop('0', '#f8576d');
                gradient.addColorStop('1', '#fe74a0');
                gd.strokeStyle = gradient;
                gd.lineWidth = 10;
                gd.lineCap = 'round';
                gd.stroke();
            }
            let timer = setInterval(() => {
                num++;
                if (num > du) {
                    clearInterval(timer);
                    chonghua();
                }
                wai(num);
            }, 5);

            function chonghua() {
                // console.log(1);
                gd.clearRect(0, 0, oC.width, oC.height);
                hua();
                wai(du);
            }
            
            
            // 添加渐变  渐变开始坐标x，y；渐变结束坐标x，y
            
            // gd.strokeStyle = gradient;
            // let cx = 400, cy = 300, r = 200;
            // gd.arc(cx, cy, r, 0, 2 * Math.PI, true);

            
            
            // gd.arc(100, 100, 80, Math.PI/6, (5*Math.PI/6), true);
            
            // gd.fillStyle = 'red';
            
            // gd.closePath();
            

            
            // gd.fill();
            // 鼠标划过变色
            // oC.onmousemove = function(ev) {
            //     let x = ev.offsetX - cx;
            //     let y = ev.offsetY - cy;
                
            //     // sqrt开根号
            //     let dis = Math.sqrt(x*x + y*y);
            //     console.log(dis);
            //     gd.beginPath();
            //     gd.arc(cx, cy, r, 0, 2 * Math.PI, true);
            //     if (dis < r) {
            //         gd.fillStyle = 'yellow';
            //     } else {
            //         gd.fillStyle = '#ccc';
            //     }
            //     gd.fill();
            // }
            
        }

        
    </script>
</head>
<body>
    <canvas id="c1" width="200" height="200"></canvas>
</body>
</html>